---
aliases: [代理转发 ]
author: lgf
created: 45_2022-11-12 19:15:01
modified: 45_2022-11-12 19:53:48
tags: [learn/program/docker, learn/program/common]
title: 代理转发 
---
# 代理转发
## 代理转发

> 向军大叔每晚八点在 [抖音 (opens new window)](https://live.douyin.com/houdunren) 和 [bilibli (opens new window)](https://space.bilibili.com/282190994) 直播

![xj-small](https://doc.houdunren.com/assets/img/xj.161cc3f2.jpg)

向军大叔已经将上一章的代码生成了新项目，请访问 [GITHUB (opens new window)](https://github.com/houdunwang/docker) 或 [GITEE (opens new window)](https://gitee.com/houdunren/docker) 查看。下面实例是根据这个项目来操作。

## 安装项目

多个站点可以使用向上面配置 LARAVEL 然后在单一容器中配置虚拟主机，下面我们介绍配置多个容器实现多站点运行。

分别 CLONE 项目 houdunren 与 hdcms

## 容器配置

为每个项目设置配置项，如果端口或容器名相同会造成冲突无法启动

### 修改配置

**houdunren/.env**

**hdcms/.env**

### 执行编译

在两个项目中分别执行命令完成编译

现在可以看到容器列表

![image-20200112143444261](https://doc.houdunren.com/assets/img/image-20200112143444261.9781d628.png)

## 安装配置

在宿主环境中安装 NGINX 服务器软件，NGINX 在不同系统中的配置文件存放目录不同

### MAC

**软件安装**

下面安装 NGINX 服务器软件

调试中难免有错误发生，通过错误日志可以很好排查

修改配置文件后需要重起 NGINX，下面介绍基本的管理命令

**文件说明**

1.  `/usr/local/etc/nginx/nginx.conf` 为主配置文件
2.  `/usr/local/etc/servers` 目录存放自定义配置文件，这样就不需要改主配置文件了

### CENTOS

**软件安装**

下面安装 NGINX 服务器软件

调试中难免有错误发生，通过错误日志可以很好排查

修改配置文件后需要重起 NGINX，下面介绍基本的管理命令

**文件说明**

1.  `/etc/nginx/nginx.conf` 为主配置文件
2.  `/etc/nginx/conf.d` 目录存放自定义配置文件，这样就不需要改主配置文件了

### HOSTS

如果在本地测试时，修改 `/etc/hosts`文件中添加两个域名，线上使用将域名解析过来就可以 了

## 配置代理

修改主配置文件 `nginx.conf`将 NGINX 默认 8080 端口改变 80

在 NGINX 配置目录（centos 为`/etc/nginx/conf.d`）创建 **hdcms.conf** ， **houdunren.conf** 两个配置文件

**houdunren.conf**

**hdcms.conf**

现在使用不同域名访问就可以被代理到不同的容器中了
