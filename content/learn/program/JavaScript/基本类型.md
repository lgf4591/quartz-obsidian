---
aliases: [基本类型 ]
author: lgf
created: 45_2022-11-12 19:15:01
modified: 45_2022-11-12 19:55:46
tags: [learn/program/javascript]
title: 基本类型 
---
# 基本类型
## 类型检测

> 向军大叔每晚八点在 [抖音 (opens new window)](https://live.douyin.com/houdunren) 和 [bilibli (opens new window)](https://space.bilibili.com/282190994) 直播

JS 提供了非常丰富的数据类型，开发者要学会使用最适合的数据类型处理业务 。

### Typeof

`typeof` 用于返回以下原始类型

-   基本类型：number/string/boolean
-   function
-   object
-   undefined

可以使用 typeof 用于判断数据的类型

### Instanceof

**`instanceof`** 运算符用于检测构造函数的 `prototype` 属性是否出现在某个实例对象的原型链上。

也可以理解为是否为某个对象的实例，`typeof`不能区分数组，但`instanceof`则可以。

> 后面章节会详细介绍原型链

### 值类型与对象

下面是使用字面量与对象方法创建字符串，返回的是不同类型。

只有对象才有方法使用，但在`JS`中也可以使用值类型调用方法，因为它会在执行时将值类型转为对象。

## String

字符串类型是使用非常多的数据类型，也是相对简单的数据类型。

### 声明定义

使用对象形式创建字符串

字符串使用单、双引号包裹，单、双引号使用结果没有区别。

### 转义符号

有些字符有双层含义，需要使用 `\` 转义符号进行含义转换。下例中引号为字符串边界符，如果输出引号时需要使用转义符号。

常用转义符号列表如下

| 符号 | 说明     |
| ---- | -------- |
| \\t  | 制表符   |
| \\n  | 换行     |
| \\\\ | 斜杠符号 |
| \\'  | 单引号   |
| \\"  | 双引号 R |

### 连接运算符

使用 `+` 可以连接多个内容组合成字符串，经常用于组合输出内容使用。

使用 `+=` 在字符串上追回字符内容

### 模板字面量

使用 \` ...\` 符号包裹的字符串中可以写入引入变量与表达式

支持换行操作不会产生错误

使用表达式

模板字面量支持嵌套使用

![image-20191011025107379](https://doc.houdunren.com/assets/img/image-20191011025107379.418bb650.png)

### 标签模板

标签模板是提取出普通字符串与变量，交由标签函数处理

下面例子将标题中有后盾人的使用标签模板加上链接

![image-20191011032629455](https://doc.houdunren.com/assets/img/image-20191011032629455.d2c72150.png)

### 获取长度

使用`length`属性可以获取字符串长度

### 大小写转换

将字符转换成大写格式

转字符为小写格式

### 移除空白

使用`trim`删除字符串左右的空白字符

使用`trimLeft`删除左边空白，使用`trimRight`删除右边空白

### 获取单字符

根据从 0 开始的位置获取字符

使用数字索引获取字符串

### 截取字符串

使用 `slice、substr、substring` 函数都可以截取字符串。

-   slice、substring 第二个参数为截取的结束位置
-   substr 第二个参数指定获取字符数量

### 查找字符串

从开始获取字符串位置，检测不到时返回 `-1`

从结尾来搜索字符串位置

search() 方法用于检索字符串中指定的子字符串，也可以使用正则表达式搜索

`includes` 字符串中是否包含指定的值，第二个参数指查找开始位置

`startsWith` 是否是指定位置开始，第二个参数为查找的开始位置。

`endsWith` 是否是指定位置结束，第二个参数为查找的结束位置。

下面是查找关键词的示例

### 替换字符串

`replace` 方法用于字符串的替换操作

默认只替换一次，如果全局替换需要使用正则（更强大的使用会在正则表达式章节介绍）

使用字符串替换来生成关键词链接

使用正则表达式完成替换

### 重复生成

下例是根据参数重复生成星号

下面是模糊后三位电话号码

### 类型转换

分隔字母

将字符串转换为数组

隐式类型转换会根据类型自动转换类型

使用 `String` 构造函数可以显示转换字符串类型

js 中大部分类型都是对象，可以使用类方法 `toString`转化为字符串

## Boolean

布尔类型包括 `true` 与 `false` 两个值，开发中使用较多的数据类型。

### 声明定义

使用对象形式创建布尔类型

但建议使用字面量创建布尔类型

### 隐式转换

基本上所有类型都可以隐式转换为 Boolean 类型。

| 数据类型  | true             | false            |
| --------- | ---------------- | ---------------- |
| String    | 非空字符串       | 空字符串         |
| Number    | 非 0 的数值      | 0 、NaN          |
| Array     | 数组不参与比较时 | 参与比较的空数组 |
| Object    | 所有对象         |                  |
| undefined | 无               | undefined        |
| null      | 无               | null             |
| NaN       | 无               | NaN              |

当与 boolean 类型比较时，会将两边类型统一为数字 1 或 0。

如果使用 Boolean 与数值比较时，会进行隐式类型转换 true 转为 1，false 转为 0。

下面是一个典型的例子，字符串在与 Boolean 比较时，两边都为转换为数值类型后再进行比较。

数组的表现与字符串原理一样，会先转换为数值

引用类型的 Boolean 值为真，如对象和数组

### 显式转换

使用 `!!` 转换布尔类型

使用 `Boolean` 函数可以显式转换为布尔类型

### 实例操作

下面使用 Boolean 类型判断用户的输入，并给出不同的反馈。

## Number

### 声明定义

使用对象方式声明

Number 用于表示整数和浮点数，数字是 `Number`实例化的对象，可以使用对象提供的丰富方法。

### 基本函数

判断是否为整数

指定返回的小数位数可以四舍五入

### NaN

表示无效的数值，下例计算将产生 NaN 结果。

NaN 不能使用 `==` 比较，使用以下代码来判断结果是否正确

也可以使用 `Object.is` 方法判断两个值是否完全相同

### 类型转换

**Number**

使用 Number 函数基本上可以转换所有类型

**parseInt**

提取字符串开始去除空白后的数字转为整数。

**parseFloat**

转换字符串为浮点数，忽略字符串前面空白字符。

比如从表单获取的数字是字符串类型需要类型转换才可以计算，下面使用乘法进行隐式类型转换。

### 舍入操作

使用 `toFixed` 可对数值舍入操作，参数指定保存的小数位

### 浮点精度

大部分编程语言在浮点数计算时都会有精度误差问题，下面来看 JS 中的表现形式

这是因为计算机以二进制处理数值类型，上面的 0.1 与 0.2 转为二进制后是无穷的

**处理方式**

一种方式使用 toFixed 方法进行小数截取

将小数转为整数进行计算后，再转为小数也可以解决精度问题

**推荐做法**

市面上已经存在很多针对数学计算的库 [mathjs (opens new window)](https://mathjs.org/examples/browser/basic_usage.html.html) 、[decimal.js (opens new window)](http://mikemcl.github.io/decimal.js) 等，我们就不需要自己构建了。下面来演示使用 [decimal.js (opens new window)](http://mikemcl.github.io/decimal.js) 进行浮点计算。

## Math

`Math` 对象提供了众多方法用来进行数学计算，下面我们介绍常用的方法，更多方法使用请查看 [MDN 官网 (opens new window)](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math) 了解。

### 取极限值

使用 `min` 与 `max` 可以取得最小与最大值。

使用`apply` 来从数组中取值

### 舍入处理

取最接近的向上整数

得到最接近的向下整数

四舍五入处理

### Random

`random` 方法用于返回 >=0 且 <1 的随机数（包括 0 但不包括 1）。

返回 0~5 的随机数，不包括 5

返回 0~5 的随机数，包括 5

下面取 2~5 的随机数（不包括 5）公式为：min+Math.floor(Math.random()\*(Max-min))

下面取 2~5 的随机数（包括 5）公式为：min+Math.floor(Math.random()\*(Max-min+1))

下面是随机点名的示例

随机取第二到第三间的学生，即 1~2 的值

## Date

网站中处理日期时间是很常用的功能，通过 `Date` 类型提供的丰富功能可以非常方便的操作。

### 声明日期

获取当前日期时间

计算脚本执行时间

当然也可以使用控制台测试

根据指定的日期与时间定义日期对象

使用展示运算符处理更方便

### 类型转换

将日期转为数值类型就是转为时间戳单位是毫秒

有时后台提供的日期为时间戳格式，下面是将时间戳转换为标准日期的方法

### 对象方法

格式化输出日期

封装函数用于复用

下面是系统提供的日期时间方法，更多方法请查看 [MDN 官网 (opens new window)](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Date)

| 方法                 | 描述                                                     |
| -------------------- | -------------------------------------------------------- |
| Date()               | 返回当日的日期和时间。                                   |
| getDate()            | 从 Date 对象返回一个月中的某一天 (1 ~ 31)。              |
| getDay()             | 从 Date 对象返回一周中的某一天 (0 ~ 6)。                 |
| getMonth()           | 从 Date 对象返回月份 (0 ~ 11)。                          |
| getFullYear()        | 从 Date 对象以四位数字返回年份。                         |
| getYear()            | 请使用 getFullYear() 方法代替。                          |
| getHours()           | 返回 Date 对象的小时 (0 ~ 23)。                          |
| getMinutes()         | 返回 Date 对象的分钟 (0 ~ 59)。                          |
| getSeconds()         | 返回 Date 对象的秒数 (0 ~ 59)。                          |
| getMilliseconds()    | 返回 Date 对象的毫秒(0 ~ 999)。                          |
| getTime()            | 返回 1970 年 1 月 1 日至今的毫秒数。                     |
| getTimezoneOffset()  | 返回本地时间与格林威治标准时间 (GMT) 的分钟差。          |
| getUTCDate()         | 根据世界时从 Date 对象返回月中的一天 (1 ~ 31)。          |
| getUTCDay()          | 根据世界时从 Date 对象返回周中的一天 (0 ~ 6)。           |
| getUTCMonth()        | 根据世界时从 Date 对象返回月份 (0 ~ 11)。                |
| getUTCFullYear()     | 根据世界时从 Date 对象返回四位数的年份。                 |
| getUTCHours()        | 根据世界时返回 Date 对象的小时 (0 ~ 23)。                |
| getUTCMinutes()      | 根据世界时返回 Date 对象的分钟 (0 ~ 59)。                |
| getUTCSeconds()      | 根据世界时返回 Date 对象的秒钟 (0 ~ 59)。                |
| getUTCMilliseconds() | 根据世界时返回 Date 对象的毫秒(0 ~ 999)。                |
| parse()              | 返回 1970 年 1 月 1 日午夜到指定日期（字符串）的毫秒数。 |
| setDate()            | 设置 Date 对象中月的某一天 (1 ~ 31)。                    |
| setMonth()           | 设置 Date 对象中月份 (0 ~ 11)。                          |
| setFullYear()        | 设置 Date 对象中的年份（四位数字）。                     |
| setYear()            | 请使用 setFullYear() 方法代替。                          |
| setHours()           | 设置 Date 对象中的小时 (0 ~ 23)。                        |
| setMinutes()         | 设置 Date 对象中的分钟 (0 ~ 59)。                        |
| setSeconds()         | 设置 Date 对象中的秒钟 (0 ~ 59)。                        |
| setMilliseconds()    | 设置 Date 对象中的毫秒 (0 ~ 999)。                       |
| setTime()            | 以毫秒设置 Date 对象。                                   |
| setUTCDate()         | 根据世界时设置 Date 对象中月份的一天 (1 ~ 31)。          |
| setUTCMonth()        | 根据世界时设置 Date 对象中的月份 (0 ~ 11)。              |
| setUTCFullYear()     | 根据世界时设置 Date 对象中的年份（四位数字）。           |
| setUTCHours()        | 根据世界时设置 Date 对象中的小时 (0 ~ 23)。              |
| setUTCMinutes()      | 根据世界时设置 Date 对象中的分钟 (0 ~ 59)。              |
| setUTCSeconds()      | 根据世界时设置 Date 对象中的秒钟 (0 ~ 59)。              |
| setUTCMilliseconds() | 根据世界时设置 Date 对象中的毫秒 (0 ~ 999)。             |
| toSource()           | 返回该对象的源代码。                                     |
| toString()           | 把 Date 对象转换为字符串。                               |
| toTimeString()       | 把 Date 对象的时间部分转换为字符串。                     |
| toDateString()       | 把 Date 对象的日期部分转换为字符串。                     |
| toGMTString()        | 请使用 toUTCString() 方法代替。                          |
| toUTCString()        | 根据世界时，把 Date 对象转换为字符串。                   |
| toLocaleString()     | 根据本地时间格式，把 Date 对象转换为字符串。             |
| toLocaleTimeString() | 根据本地时间格式，把 Date 对象的时间部分转换为字符串。   |
| toLocaleDateString() | 根据本地时间格式，把 Date 对象的日期部分转换为字符串。   |
| UTC()                | 根据世界时返回 1970 年 1 月 1 日 到指定日期的毫秒数。    |
| valueOf()            | 返回 Date 对象的原始值。                                 |

### moment.js

Moment.js 是一个轻量级的 JavaScript 时间库，它方便了日常开发中对时间的操作，提高了开发效率。

更多使用方法请访问中文官网 [http://momentjs.cn (opens new window)](http://momentjs.cn/) 或 英文官网 [https://momentjs.com (opens new window)](https://momentjs.com/)

获取当前时间

设置时间

十天后的日期
