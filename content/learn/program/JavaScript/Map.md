---
aliases: [Map ]
author: lgf
created: 45_2022-11-12 19:15:01
modified: 45_2022-11-12 19:55:02
tags: [learn/program/javascript]
title: Map 
---
# Map
Map是一组键值对的结构，用于解决以往不能用对象做为键的问题

-   具有极快的查找速度
-   函数、对象、基本类型都可以作为键或值

## 声明定义

可以接受一个数组作为参数，该数组的成员是一个表示键值对的数组。

使用`set` 方法添加元素，支持链式操作

使用构造函数`new Map`创建的原理如下

对于键是对象的`Map`， 键保存的是内存地址，值相同但内存地址不同的视为两个键。

## 获取数量

获取数据数量

## 元素检测

检测元素是否存在

## 读取元素

## 删除元素

使用 `delete()` 方法删除单个元素

使用`clear`方法清除Map所有元素

## 遍历数据

使用 `keys()/values()/entries()` 都可以返回可遍历的迭代对象。

可以使用`keys/values` 函数遍历键与值

使用`for/of`遍历操作，直播遍历Map 等同于使用`entries()` 函数

使用`forEach`遍历操作

## 数组转换

可以使用`展开语法` 或 `Array.form` 静态方法将Set类型转为数组，这样就可以使用数组处理函数了

检索包含`后盾人`的值组成新Map

## 节点集合

map的key可以为任意类型，下面使用DOM节点做为键来记录数据。

## 实例操作

当不接受协议时无法提交表单，并根据自定义信息提示用户。

## WeakMap

**WeakMap** 对象是一组键/值对的集

-   键名必须是对象
-   WeaMap对键名是弱引用的，键值是正常引用
-   垃圾回收不考虑WeaMap的键名，不会改变引用计数器，键在其他地方不被引用时即删除
-   因为WeakMap 是弱引用，由于其他地方操作成员可能会不存在，所以不可以进行`forEach( )`遍历等操作
-   也是因为弱引用，WeaMap 结构没有keys( )，values( )，entries( )等方法和 size 属性
-   当键的外部引用删除时，希望自动删除数据时使用 `WeakMap`

### 声明定义

以下操作由于键不是对象类型将产生错误

将DOM节点保存到`WeakSet`

### 基本操作

下面是WeakSet的常用指令

### 垃圾回收

WakeMap的键名对象不会增加引用计数器，如果一个对象不被引用了会自动删除。

-   下例当`hd`删除时内存即清除，因为WeakMap是弱引用不会产生引用计数
-   当垃圾回收时因为对象被删除，这时WakeMap也就没有记录了

### 选课案例

![Untitled](https://doc.houdunren.com/assets/img/Untitled-3394771.86c02b15.gif)
